# SLOP Configuration Example
# Copy to slop.toml and customize for your setup

# ============================================================================
# PROVIDERS
# Define LLM providers. Each provider can be referenced by tiers below.
# ============================================================================

[providers.ollama]
type = "ollama"
base_url = "http://localhost:11434"

[providers.openai]
type = "openai-compatible"
base_url = "https://api.openai.com/v1"
api_key = "${OPENAI_API_KEY}"

# Anthropic via OpenAI-compatible endpoint
[providers.anthropic]
type = "openai-compatible"
base_url = "https://api.anthropic.com/v1"
api_key = "${ANTHROPIC_API_KEY}"

# Local vLLM server
# [providers.vllm]
# type = "openai-compatible"
# base_url = "http://localhost:8000/v1"
# api_key = ""

# LM Studio
# [providers.lmstudio]
# type = "openai-compatible"
# base_url = "http://localhost:1234/v1"
# api_key = ""

# OpenRouter - access many models through one API
[providers.openrouter]
type = "openai-compatible"
base_url = "https://openrouter.ai/api/v1"
api_key = "${OPENROUTER_API_KEY}"

# ============================================================================
# TIERS
# Configure which provider and model to use for each complexity tier.
# Holes are classified by complexity and routed to the appropriate tier.
# ============================================================================

[tiers.tier-1]
# Simple: boolean expressions, arithmetic, field access
provider = "ollama"
model = "phi3:mini"
context_length = 2048
temperature = 0.3

[tiers.tier-2]
# Moderate: conditionals, Result construction, simple transforms
provider = "ollama"
model = "llama3:8b"
context_length = 4096
temperature = 0.4

[tiers.tier-3]
# Complex: loops, multiple conditionals, state manipulation
provider = "ollama"
model = "llama3:70b-q4"
context_length = 8192
temperature = 0.5

[tiers.tier-4]
# Advanced: algorithms, state machines, complex logic
provider = "openai"
model = "gpt-4o"
context_length = 128000
temperature = 0.6

# ============================================================================
# ROUTING
# Control how holes are routed and retried across tiers.
# ============================================================================

[routing]
max_retries = 2
escalate_on_failure = true
